// Module included in the following assemblies:
//
// * virt/monitoring/virt-running-cluster-checkups.adoc

:_mod-docs-content-type: PROCEDURE
[id="virt-retain-storage-checkup-resources_{context}"]
= Retaining resources for troubleshooting storage checkups

[role="_abstract"]
The predefined storage checkup includes `skipTeardown` configuration options, which control resource clean up after a storage checkup runs.
By default, the `skipTeardown` field value is `Never`, which means that the checkup always performs teardown steps and deletes all resources after the checkup runs.

You can retain resources for further inspection in case a failure occurs by setting the `skipTeardown` field to `onfailure`.

.Prerequisites

* You have installed the {oc-first}.

.Procedure

. Run the following command to edit the `storage-checkup-config` config map:
+
[source,terminal]
----
$ oc edit configmap storage-checkup-config -n <checkup_namespace>
----

. Configure the `skipTeardown` field to use the `onfailure` value. You can do this by modifying the `storage-checkup-config` config map, stored in the `storage_checkup.yaml` file:
+
[source,yaml]
----
apiVersion: v1
kind: ConfigMap
metadata:
  name: storage-checkup-config
  namespace: <checkup_namespace>
data:
  spec.param.skipTeardown: onfailure
# ...
----

. Reapply the `storage-checkup-config` config map by running the following command:
+
[source,terminal]
----
$ oc apply -f storage_checkup.yaml -n <checkup_namespace>
----
